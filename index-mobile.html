<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding Invitation (Mobile) - Zen & Yessica</title>
  <style>
    body, html { margin:0; padding:0; height:100%; font-family:Arial, sans-serif; background:#333; color:white; }
    .mobile-cover { height:100vh; display:flex; justify-content:center; align-items:center; background:url("image/cover.jpg") no-repeat center center/cover; }
    .overlay { background:rgba(0,0,0,0.5); padding:40px 20px; border-radius:10px; text-align:center; width:90%; }
    .mobile-content { display:none; padding:20px; background:rgba(0,0,0,0.6); min-height:100vh; text-align:center; }
    .gallery img { width:100%; border-radius:10px; margin-bottom:10px; }
    #wishesListMobile { text-align:left; margin-top:20px; padding:10px; background:rgba(255,255,255,0.1); border-radius:8px; max-height:300px; overflow-y:auto; }
    .wish { margin-bottom:10px; padding:10px; border-bottom:1px solid #666; }
  </style>
</head>
<body>
  <!-- Music -->
  <audio id="bg-music" loop>
    <source src="music/Dive-Olivia Dean-Acoustic.mp3" type="audio/mpeg">
  </audio>
  <button id="music-control" style="position:fixed; bottom:20px; right:20px;">üîä</button>

  <!-- Mobile Cover -->
  <div class="mobile-cover" id="mobileCover">
    <div class="overlay">
      <p>WEDDING THANKSGIVING GREETINGS</p>
      <h1>ZEN & YESSICA</h1>
      <p>SATURDAY, JANUARY 17th 2025</p>
      <button onclick="openInvitation()">OPEN INVITATION</button>
    </div>
  </div>

  <!-- Mobile Content -->
  <div class="mobile-content" id="mobileContent">
    <h3>Dear Mr/Mrs [Guest Name]</h3>
    <h1>Zen & Yessica</h1>
    <p>Saturday, 17 January 2025</p>
    <hr>
    <p style="margin:20px 0; font-style:italic;">
      ‚ÄúSo they are no longer two, but one flesh.<br>What therefore God has joined together, let no man separate.‚Äù<br>Matthew 19:6
    </p>

    <h2>The Groom</h2><p>Zen</p>
    <h2>The Bride</h2><p>Yessica</p>
    <h2>Holy Matrimony</h2><p>Gereja Santo Fransiskus Asisi</p>
    <iframe src="https://www.google.com/maps?q=Gereja+Katolik+St+Fransiskus+Asisi+Cibinong&output=embed" width="100%" height="250" style="border:0; border-radius:8px;"></iframe>
    <h2>Reception</h2><p>Bagas Raya Cibinong</p>
    <iframe src="https://www.google.com/maps?q=Bagas+Raya+Cibinong&output=embed" width="100%" height="250" style="border:0; border-radius:8px;"></iframe>

    <h2>Our Moment</h2>
    <div class="gallery">
      <img src="image/photo1.jpg" alt="Moment 1">
      <img src="image/photo2.jpg" alt="Moment 2">
      <img src="image/photo3.jpg" alt="Moment 3">
    </div>

    <h2>RSVP & Wishes</h2>
    <form id="rsvpFormMobile">
      <input name="Name" type="text" placeholder="Your Name" required style="width:90%; padding:10px;"><br>
      <select name="Attendance" required style="width:90%; padding:10px;">
        <option value="">-- Apakah Anda akan hadir? --</option>
        <option value="Ya">Ya, saya akan hadir</option>
        <option value="Tidak">Maaf, saya tidak bisa hadir</option>
      </select><br>
      <textarea name="Wishes" placeholder="Your wishes..." style="width:90%; padding:10px;"></textarea><br>
      <button type="submit" style="padding:10px 20px; background:#bc8887; color:white; border:none; border-radius:8px;">Send</button>
    </form>
    <p id="responseMsgMobile"></p>

    <h2 style="margin-top:40px;">All Wishes üíå</h2>
    <div id="wishesListMobile"><p>Loading wishes...</p></div>
  </div>

  <script>
    const scriptURL = "YOUR_SCRIPT_URL"; // üîó Ganti dengan Google Script kamu

    // Open invitation
    function openInvitation(){ document.getElementById("mobileCover").style.display="none"; document.getElementById("mobileContent").style.display="block"; }

    // Music
    const music=document.getElementById("bg-music"), controlBtn=document.getElementById("music-control");
    controlBtn.onclick=()=>{ if(music.paused){music.play();controlBtn.textContent="üîä";}else{music.pause();controlBtn.textContent="üîá";} }

    // Time Ago
    function timeAgo(dateString) {
      const now=new Date(); const date=new Date(dateString); const diff=(now-date)/1000;
      if(diff<60) return "baru saja";
      const minutes=Math.floor(diff/60); if(minutes<60) return `${minutes} menit lalu`;
      const hours=Math.floor(minutes/60); if(hours<24) return `${hours} jam lalu`;
      const days=Math.floor(hours/24); if(days<7) return `${days} hari lalu`;
      const weeks=Math.floor(days/7); return `${weeks} minggu lalu`;
    }

    // Form submit
    const form=document.getElementById("rsvpFormMobile"), msg=document.getElementById("responseMsgMobile");
    form.addEventListener("submit",e=>{
      e.preventDefault();
      fetch(scriptURL,{method:"POST",body:new FormData(form)})
        .then(()=>{msg.textContent="‚úÖ RSVP berhasil dikirim!"; msg.style.color="lightgreen"; form.reset(); loadWishes();})
        .catch(()=>{msg.textContent="‚ùå Gagal mengirim RSVP."; msg.style.color="red";});
    });

    // Load wishes
    async function loadWishes(){
      try{
        const res=await fetch(scriptURL); const data=await res.json();
        document.getElementById("wishesListMobile").innerHTML=data.reverse().map(w=>`
          <div class="wish"><strong>${w.name}</strong><br><em>"${w.wishes}"</em><br><small>${timeAgo(w.timestamp)}</small></div>
        `).join("");
      }catch{document.getElementById("wishesListMobile").innerHTML="<p>‚ùå Gagal load ucapan.</p>";}
    }
    loadWishes();
  </script>
</body>
</html>
