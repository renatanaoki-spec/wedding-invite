<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zen & Yessica ‚Äî Invitation</title>

<style>
  @font-face{
    font-family:"White Angelica";
    src:url("font/WhiteAngelica.ttf") format("truetype");
    font-display:swap;
  }
  :root{
    --mauve:#b46b88; --mauve-2:#9a5673;
    --ink:#2f2f2f; --glass:rgba(255,255,255,.9);
    --shadow:0 10px 30px rgba(0,0,0,.14);
    --ease:cubic-bezier(.22,.61,.36,1);
  }

  /* layout: body fixed, scroll happens inside #snap */
  html,body{ height:100%; margin:0; }
  body{
    overflow:hidden;
    background:url("image/BG3.jpeg") center/cover fixed no-repeat;
    color:var(--ink);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }

  /* sticky nav */
  .nav{
    position:fixed; top:12px; left:0; right:0; z-index:30; display:flex; justify-content:center; gap:10px;
  }
  .pill{
    padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.5);
    background:rgba(255,255,255,.5); backdrop-filter:blur(8px);
    text-decoration:none; color:#203; font-weight:700; opacity:.8;
  }
  .pill.active{ background:var(--mauve); color:#fff; border-color:transparent; box-shadow:0 6px 16px rgba(180,107,136,.28); opacity:1 }

  /* snap container */
  #snap{
    position:relative; height:100vh; overflow-y:auto; scroll-snap-type:y mandatory;
    scroll-behavior:smooth;
  }
  section.s{ min-height:100vh; scroll-snap-align:start; scroll-snap-stop:always;
             display:flex; align-items:center; justify-content:center; padding:64px 18px; position:relative; }

  /* hero overlay for readability */
  .hero::before{
    content:""; position:absolute; inset:0; z-index:0;
    background:
      radial-gradient(100% 70% at 50% 40%, rgba(18,24,21,.60) 0%, rgba(18,24,21,.30) 60%, rgba(18,24,21,.08) 100%),
      linear-gradient(to bottom, rgba(18,24,21,.45), rgba(18,24,21,.18) 55%, rgba(18,24,21,0) 100%);
    backdrop-filter: blur(1.2px);
  }
  .hero .inner{ position:relative; z-index:1; }

  .title{ color:#fff; font-size:clamp(38px,7vw,86px); margin:0 0 10px; text-shadow:0 4px 22px rgba(0,0,0,.55), 0 2px 0 rgba(0,0,0,.28) }
  .names{ font-family:"White Angelica", cursive; font-size:clamp(42px,9vw,92px); color:#fff; margin:0 0 8px;
          -webkit-text-stroke:.5px rgba(0,0,0,.15); text-shadow:0 2px 10px rgba(0,0,0,.35), 0 0 22px rgba(255,255,255,.3) }
  .quote{ color:#f5f5f2; text-shadow:0 3px 14px rgba(0,0,0,.5); max-width:760px; margin:12px auto 24px; }

  /* countdown glass chips */
  #countdown{ display:flex; gap:14px; justify-content:center; flex-wrap:wrap }
  .chip{ min-width:100px; text-align:center; padding:10px 14px; border-radius:14px;
         background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.35);
         color:#fff; backdrop-filter: blur(2px); box-shadow:0 6px 18px rgba(0,0,0,.18); }
  .chip span{ display:block; font-size:2rem }
  .chip span.pop{ animation:pop .5s var(--ease) }
  @keyframes pop{ 0%{transform:scale(.9); opacity:.7} 60%{transform:scale(1.08); opacity:1} 100%{transform:scale(1)} }

  /* generic inner card */
  .inner{
    width:min(960px, 92vw);
    background:var(--glass); border-radius:16px; padding:28px; box-shadow:var(--shadow);
  }
  h2{ color:var(--mauve); margin:0 0 .5rem }

  .btn{
    display:inline-block; padding:12px 28px; border:none; border-radius:999px;
    background:var(--mauve); color:#fff; font-weight:700; cursor:pointer; text-decoration:none;
    box-shadow:0 10px 24px rgba(180,107,136,.35); position:relative; overflow:hidden; transition:transform .25s var(--ease);
  }
  .btn:hover{ transform:translateY(-2px) }
  .btn::after{ content:""; position:absolute; inset:0; transform:translateX(-120%) skewX(-20deg);
               background:linear-gradient(90deg, transparent, rgba(255,255,255,.65), transparent);
               transition:transform .65s var(--ease) }
  .btn:hover::after{ transform:translateX(200%) skewX(-20deg) }

  /* music */
  #music{ position:fixed; bottom:18px; right:18px; z-index:40; width:54px; height:54px;
          border-radius:50%; border:none; background:var(--mauve); color:#fff; font-size:1.2rem; box-shadow:var(--shadow); cursor:pointer }

  /* notes + form */
  form{ max-width:560px; margin:0 auto; display:flex; flex-direction:column; gap:14px; text-align:left }
  form input, form textarea, form select{
    padding:12px; border:1px solid #ddd; border-radius:10px; font-size:1rem; background:#fff;
  }
  form textarea{ min-height:110px; resize:vertical }
  .pagination{ display:flex; gap:10px; justify-content:center; margin-top:12px }
  .pagination button{ padding:8px 14px; border:none; border-radius:8px; background:var(--mauve); color:#fff; cursor:pointer }
  .pagination button:disabled{ background:#cfcfcf; cursor:not-allowed }
  .note{ padding:12px; border-bottom:1px solid rgba(0,0,0,.1); opacity:0; transform:translateY(8px) }
  .note.show{ opacity:1; transform:none; transition:opacity .5s var(--ease), transform .5s var(--ease) }
</style>
</head>
<body>

<!-- sticky nav -->
<nav class="nav">
  <a class="pill active" href="#home">Home</a>
  <a class="pill" href="#details">Details</a>
  <a class="pill" href="#verse">Verse</a>
  <a class="pill" href="#rsvp">RSVP</a>
</nav>

<!-- scroll-snap container -->
<main id="snap">
  <!-- HERO -->
  <section class="s hero" id="home">
    <div class="inner" style="background:transparent; box-shadow:none">
      <h1 class="title">SAVE THE DATE</h1>
      <h2 class="names">Zen &amp; Yessica</h2>
      <p class="quote">‚ÄúMarriage is an act of worship, and every act of worship leads to His love as its ultimate goal. It is only fitting that every effort to attain His love is pursued with joy.‚Äù</p>

      <div id="countdown">
        <div class="chip"><span id="d">00</span>Days</div>
        <div class="chip"><span id="h">00</span>Hours</div>
        <div class="chip"><span id="m">00</span>Minutes</div>
        <div class="chip"><span id="s">00</span>Seconds</div>
      </div>

      <p style="text-align:center; margin-top:16px">
        <a class="btn" target="_blank" rel="noopener"
          href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Zen+%26+Yessica+Wedding&dates=20260117T030000Z/20260117T090000Z&details=Join+us+for+our+wedding+day!&location=Gereja+Santo+Fransiskus+Asisi,+Cibinong">
          Add to Google Calendar
        </a>
      </p>
    </div>
  </section>

  <!-- DETAILS -->
  <section class="s" id="details">
    <div class="inner">
      <h2>Wedding Day</h2>
      <p>Saturday, 17 January 2026</p>
      <p>Holy Matrimony: Gereja Santo Fransiskus Asisi, Cibinong</p>
      <p>Reception: Bagas Raya Cibinong</p>
    </div>
  </section>

  <!-- VERSE -->
  <section class="s" id="verse">
    <div class="inner">
      <h2>Bible Verse</h2>
      <p>‚ÄúSo they are no longer two, but one flesh. What therefore God has joined together, let no man separate.‚Äù<br>‚Äì Matthew 19:6</p>
    </div>
  </section>

  <!-- RSVP + NOTES -->
  <section class="s" id="rsvp">
    <div class="inner">
      <h2>RSVP & Notes</h2>
      <form id="rsvpForm">
        <input type="hidden" name="token" value="ZENYESSICA2026">
        <input type="hidden" id="referer" name="referer">
        <input name="Name" type="text" placeholder="Your name üíå" required>
        <textarea name="Notes" placeholder="Write your wishes and prayers for us"></textarea>
        <select name="Attendance" required>
          <option value="">-- Attendance --</option>
          <option value="Yes">üíñ Yes, I‚Äôll be there</option>
          <option value="No">üå∏ Sorry, can‚Äôt attend</option>
        </select>
        <button type="submit" class="btn">Send</button>
      </form>
      <p id="responseMsg"></p>

      <h3 style="color:var(--mauve)">Guest Notes üíå</h3>
      <div id="notesContainer">Loading...</div>
      <div class="pagination">
        <button id="prevBtn" type="button">Prev</button>
        <button id="nextBtn" type="button">Next</button>
      </div>
    </div>
  </section>
</main>

<!-- music -->
<button id="music" title="Play/Pause">‚ñ∂Ô∏è</button>

<script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbwRSHvhi28_Fes26DuLR8Ywf0zqY2U7ePzQCdb_4vyUH_Nq0_culqdSfb1U7tajj8zT/exec";
  document.getElementById("referer").value = location.hostname;

  /* active nav pills on snap */
  const snap = document.getElementById('snap');
  const pills = [...document.querySelectorAll('.pill')];
  const sections = pills.map(a => document.querySelector(a.getAttribute('href')));
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        pills.forEach(p => p.classList.toggle('active', p.getAttribute('href') === '#'+e.target.id));
      }
    });
  }, {root: snap, threshold: .6});
  sections.forEach(s => io.observe(s));

  /* countdown with pop */
  const dEl=document.getElementById('d'), hEl=document.getElementById('h'),
        mEl=document.getElementById('m'), sEl=document.getElementById('s');
  let prev={};
  const pop=(el,v,k)=>{ if(prev[k]!==v){ el.textContent=v; el.classList.remove('pop'); void el.offsetWidth; el.classList.add('pop'); prev[k]=v; } };
  function tick(){
    const t=new Date("Jan 17, 2026 09:00:00").getTime(), now=Date.now(), diff=t-now;
    if(diff<=0){ document.getElementById('countdown').innerHTML="üéâ Today is the wedding day!"; return; }
    pop(dEl, Math.floor(diff/86400000), 'd');
    pop(hEl, Math.floor((diff%86400000)/3600000), 'h');
    pop(mEl, Math.floor((diff%3600000)/60000), 'm');
    pop(sEl, Math.floor((diff%60000)/1000), 's');
  }
  setInterval(tick,1000); tick();

  /* music */
  const musicBtn = document.getElementById('music');
  const audio = new Audio('music/Music-1.mp3'); audio.loop = true;
  musicBtn.addEventListener('click', ()=>{ if(audio.paused){ audio.play(); musicBtn.textContent='‚è∏Ô∏è'; } else { audio.pause(); musicBtn.textContent='‚ñ∂Ô∏è'; }});
  document.addEventListener('visibilitychange', ()=>{ if(document.hidden){ audio.pause(); musicBtn.textContent='‚ñ∂Ô∏è'; }});

  /* RSVP + notes with time-ago (ID) */
  function timeAgo(ts){
    const now=new Date(), d=new Date(ts), s=(now-d)/1000;
    if(s<60) return "baru saja";
    const m=Math.floor(s/60); if(m<60) return `${m} menit lalu`;
    const h=Math.floor(m/60); if(h<24) return `${h} jam lalu`;
    const day=Math.floor(h/24); if(day<7) return `${day} hari lalu`;
    const w=Math.floor(day/7); if(w<4) return `${w} minggu lalu`;
    const mo=Math.floor(day/30); return `${mo} bulan lalu`;
  }

  const form = document.getElementById('rsvpForm');
  const msg  = document.getElementById('responseMsg');
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    if(!form.Name.value.trim() || !form.Attendance.value){
      msg.textContent="‚ö†Ô∏è Please fill out name and attendance üå∏"; msg.style.color="#c66"; return;
    }
    msg.textContent="‚è≥ Sending..."; msg.style.color="#666";
    try{
      const r=await fetch(scriptURL, { method:"POST", body:new FormData(form) });
      const data=await r.json();
      if(data.status==="success"){ msg.textContent="‚úÖ RSVP berhasil dikirim! Thank you üíï"; msg.style.color="green"; form.reset(); currentPage=1; loadNotes(); }
      else if(data.status==="duplicate"){ msg.textContent="‚ö†Ô∏è You already submitted recently."; msg.style.color="#bb8a4e"; }
      else{ msg.textContent="‚ùå Gagal mengirim RSVP."; msg.style.color="crimson"; }
    }catch(err){ msg.textContent="‚ùå Error: "+err; msg.style.color="crimson"; }
  });

  let notes=[], currentPage=1, perPage=5;
  async function loadNotes(){
    try{
      const res=await fetch(scriptURL); notes=await res.json();
      notes.sort((a,b)=> new Date(b.timestamp)-new Date(a.timestamp));
      renderNotes();
    }catch{ document.getElementById("notesContainer").innerHTML="<p>‚ùå Gagal load notes.</p>"; }
  }
  function renderNotes(){
    const box=document.getElementById('notesContainer'); box.innerHTML="";
    if(!notes.length){ box.innerHTML="<p>No notes yet.</p>"; return; }
    const start=(currentPage-1)*perPage; const page=notes.slice(start,start+perPage);
    page.forEach((n,i)=>{
      const el=document.createElement('div'); el.className='note'; el.style.transitionDelay=(i*80)+"ms";
      const icon = n.attendance==="Yes" ? "üíñ" : (n.attendance==="No" ? "üå∏" : "");
      el.innerHTML = `<strong style="color:var(--mauve)">${n.name||"Guest"}</strong> ${icon}<br>
                      <em>${(n.notes||'').toString().replace(/</g,'&lt;')}</em><br>
                      <small>${timeAgo(n.timestamp)}</small>`;
      box.appendChild(el); requestAnimationFrame(()=> el.classList.add('show'));
    });
    document.getElementById('prevBtn').disabled = start<=0;
    document.getElementById('nextBtn').disabled = start+perPage >= notes.length;
  }
  document.getElementById('prevBtn').addEventListener('click', ()=>{ if(currentPage>1){ currentPage--; renderNotes(); }});
  document.getElementById('nextBtn').addEventListener('click', ()=>{ if(currentPage*perPage<notes.length){ currentPage++; renderNotes(); }});
  loadNotes();

  /* Optional: tampilkan "Dear <guest>" jika ada query */
  const to = new URLSearchParams(location.search).get('to');
  if(to){
    const p = document.createElement('p');
    p.className = 'quote'; p.textContent = `Dear ${to}`;
    document.querySelector('#home .inner').insertBefore(p, document.getElementById('countdown'));
  }
</script>
</body>
</html>
