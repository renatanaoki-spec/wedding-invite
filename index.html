<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding Invitation - Zen & Yessica</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Arial', sans-serif;
      color: #333;
      text-align: center;
      background: #f7f4f2;
    }

    /* üéâ Save the Date Hero */
    .hero {
      height: 100vh;
      background: #bc8887;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: white;
      text-align: center;
    }
    .hero h1 {
      font-size: 3rem;
      font-weight: 900;
      margin-bottom: 20px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    .hero .quote {
      max-width: 600px;
      font-size: 1.1rem;
      margin: 20px auto 40px;
      line-height: 1.5;
    }
    #countdown {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 20px 0 40px;
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    .time-box span {
      display: block;
      font-size: 2rem;
    }
    .btn {
      display: inline-block;
      padding: 12px 30px;
      background: rgba(255,255,255,0.2);
      border: 2px solid white;
      color: white;
      border-radius: 30px;
      text-decoration: none;
      font-size: 1rem;
      letter-spacing: 1px;
      transition: 0.3s;
    }
    .btn:hover {
      background: white;
      color: #333;
    }

    /* üé∂ Music button */
    #music-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #bc8887;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }

    section {
      padding: 40px 20px;
    }
    .date {
      font-size: 1.5rem;
      margin: 20px 0;
    }
    .venue {
      margin: 10px 0;
      font-style: italic;
    }
    footer {
      background: #333;
      color: white;
      padding: 20px;
      margin-top: 40px;
    }
    /* Notes list */
    #notesList div {
      padding: 10px;
      margin: 10px auto;
      border-bottom: 1px solid #ccc;
      max-width: 600px;
      text-align: left;
    }
  </style>
</head>
<body>

  <!-- üé∂ Background Music -->
  <audio id="bg-music" autoplay loop muted>
    <source src="music/Music-1.mp3" type="audio/mpeg">
  </audio>
  <button id="music-control">‚è∏Ô∏è</button>

  <!-- üéâ Save the Date Section -->
  <section class="hero">
    <h1>SAVE THE DATE</h1>
    <p class="quote">
      ‚ÄúMarriage is an act of worship, and every act of worship leads to His love as its ultimate goal. 
      It is only fitting that every effort to attain His love is pursued with joy.‚Äù
    </p>

    <!-- Countdown -->
    <div id="countdown">
      <div class="time-box"><span id="days">00</span>Days</div>
      <div class="time-box"><span id="hours">00</span>Hours</div>
      <div class="time-box"><span id="minutes">00</span>Minutes</div>
      <div class="time-box"><span id="seconds">00</span>Seconds</div>
    </div>

    <!-- Save the Date button -->
    <a class="btn" 
       href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Zen+%26+Yessica+Wedding&dates=20260117T030000Z/20260117T090000Z&details=Join+us+for+our+wedding+day!&location=Gereja+Santo+Fransiskus+Asisi,+Cibinong" 
       target="_blank">
      SAVE THE DATE
    </a>
  </section>

  <!-- üìÖ Wedding Details -->
  <section>
    <h2>Wedding Day</h2>
    <p class="date">Saturday, 17 January 2026</p>
    <p class="venue">Holy Matrimony: Gereja Santo Fransiskus Asisi, Cibinong</p>
    <p class="venue">Reception: Bagas Raya Cibinong</p>
  </section>

  <!-- ‚úùÔ∏è Bible Verse -->
  <section>
    <h2>Bible Verse</h2>
    <p style="font-style:italic; max-width:600px; margin:auto;">
      ‚ÄúSo they are no longer two, but one flesh.  
      What therefore God has joined together, let no man separate.‚Äù  
      <br>‚Äì Matthew 19:6
    </p>
  </section>

  <!-- üìù Notes & RSVP Section -->
  <section>
    <h2>RSVP & Notes</h2>
    <form id="notesForm">
      <input type="text" id="name" placeholder="Your Name" required style="width:90%; padding:10px; margin:5px;"><br>
      <textarea id="notes" placeholder="Write your notes..." required style="width:90%; padding:10px; margin:5px;"></textarea><br>
      <select id="attendance" required style="width:90%; padding:10px; margin:5px;">
        <option value="">-- Will you attend? --</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select><br>
      <button type="submit" style="padding:10px 20px; background:#bc8887; color:white; border:none; border-radius:8px; cursor:pointer;">Submit</button>
    </form>
    <p id="formMsg"></p>

    <h3>Guest Notes üíå</h3>
    <div id="notesList"><p>Loading...</p></div>
    <div style="margin-top:10px;">
      <button id="prevBtn">‚¨Ö Prev</button>
      <span id="pageInfo"></span>
      <button id="nextBtn">Next ‚û°</button>
    </div>
  </section>

  <!-- ‚ù§Ô∏è Footer -->
  <footer>
    <p>With love, Zen & Yessica üíï</p>
  </footer>

  <script>
    // üé∂ Music autoplay fix
    const music = document.getElementById("bg-music");
    const controlBtn = document.getElementById("music-control");
    window.addEventListener("load", () => {
      music.play().then(() => { music.muted = false; }).catch(err => console.log("Autoplay blocked:", err));
    });
    controlBtn.addEventListener("click", () => {
      if (music.paused) { music.play(); controlBtn.textContent = "‚è∏Ô∏è"; }
      else { music.pause(); controlBtn.textContent = "‚ñ∂Ô∏è"; }
    });

    // ‚è≥ Countdown
    function updateCountdown() {
      const weddingDate = new Date("Jan 17, 2026 09:00:00").getTime();
      const now = new Date().getTime();
      const diff = weddingDate - now;
      if (diff <= 0) { document.getElementById("countdown").innerHTML = "üéâ Today is the wedding day!"; return; }
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
      const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
      const seconds = Math.floor((diff % (1000*60)) / 1000);
      document.getElementById("days").textContent = days;
      document.getElementById("hours").textContent = hours;
      document.getElementById("minutes").textContent = minutes;
      document.getElementById("seconds").textContent = seconds;
    }
    setInterval(updateCountdown, 1000); updateCountdown();

    // üìù Notes + RSVP integration with Google Sheets
    const scriptURL = "https://script.google.com/macros/s/AKfycbwPigWHnh7c9WMZMb7M4pJctXsb_fQpKfAQ8vKK5t3YUIhFcm4eG4Mf2zv-TJt1OgMc/exec"; // <-- replace with your Web App link
    let submitting = false;
    let currentPage = 1;
    const notesPerPage = 5;
    let allNotes = [];

    document.getElementById("notesForm").addEventListener("submit", async e => {
      e.preventDefault();
      if (submitting) return;
      submitting = true;
      const name = document.getElementById("name").value.trim();
      const notes = document.getElementById("notes").value.trim();
      const attendance = document.getElementById("attendance").value;
      const formMsg = document.getElementById("formMsg");
      formMsg.textContent = "Submitting...";
      try {
        const res = await fetch(scriptURL, {
          method: "POST",
          body: JSON.stringify({ name, notes, attendance }),
          headers: { "Content-Type": "application/json" }
        });
        const result = await res.json();
        if (result.status === "success") {
          formMsg.textContent = "‚úÖ Thank you for your response!";
          formMsg.style.color = "green";
          document.getElementById("notesForm").reset();
          loadNotes();
        } else if (result.status === "duplicate") {
          formMsg.textContent = "‚ö†Ô∏è Duplicate submission detected.";
          formMsg.style.color = "orange";
        } else {
          formMsg.textContent = "‚ùå Failed to submit.";
          formMsg.style.color = "red";
        }
      } catch (err) {
        formMsg.textContent = "‚ùå Error connecting to server.";
        formMsg.style.color = "red";
      }
      submitting = false;
    });

    async function loadNotes() {
      try {
        const res = await fetch(scriptURL);
        const data = await res.json();
        allNotes = data.reverse();
        currentPage = 1;
        renderNotes();
      } catch {
        document.getElementById("notesList").innerHTML = "<p>‚ùå Failed to load notes.</p>";
      }
    }

    function renderNotes() {
      const start = (currentPage - 1) * notesPerPage;
      const end = start + notesPerPage;
      const pageNotes = allNotes.slice(start, end);
      document.getElementById("notesList").innerHTML = pageNotes.map(n => `
        <div><strong>${n.name}</strong> (${n.attendance})<br><em>${n.notes}</em></div>
      `).join("");
      const totalPages = Math.ceil(allNotes.length / notesPerPage) || 1;
      document.getElementById("pageInfo").textContent = `Page ${currentPage} of ${totalPages}`;
      document.getElementById("prevBtn").disabled = currentPage === 1;
      document.getElementById("nextBtn").disabled = currentPage === totalPages;
    }

    document.getElementById("prevBtn").addEventListener("click", () => {
      if (currentPage > 1) { currentPage--; renderNotes(); }
    });
    document.getElementById("nextBtn").addEventListener("click", () => {
      const totalPages = Math.ceil(allNotes.length / notesPerPage);
      if (currentPage < totalPages) { currentPage++; renderNotes(); }
    });

    loadNotes();
  </script>
</body>
</html>
