<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zen & Yessica ‚Äî Invitation</title>

<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&display=swap" rel="stylesheet">

<style>
  @font-face{
    font-family:"White Angelica";
    src:url("font/WhiteAngelica.ttf") format("truetype");
    font-display:swap;
  }
  :root{
    --mauve:#b46b88; --mauve-2:#9a5673;
    --ivory:#fffef9; --ink:#2f2f2f;
    --blur-bg: rgba(255,255,255,.72);
    --shadow:0 10px 30px rgba(0,0,0,.14);
    --ease:cubic-bezier(.22,.61,.36,1);
  }

  *{box-sizing:border-box}
  html{
    scroll-behavior:smooth;
  }
  body{
    margin:0;
    font-family:'Lora', serif;
    color:var(--ink);
    background:url("image/BG3.jpeg") center/cover fixed no-repeat;
    /* Scroll Snap container */
    scroll-snap-type:y proximity;
  }

  /* Sticky top nav */
  .topnav{
    position:sticky; top:0; z-index:20;
    display:flex; gap:14px; align-items:center; justify-content:center;
    padding:10px;
    background:var(--blur-bg); backdrop-filter: blur(8px) saturate(1.1);
    border-bottom:1px solid rgba(0,0,0,.06);
  }
  .topnav a{
    padding:8px 12px; border-radius:999px; text-decoration:none; color:#234;
    font-weight:600; opacity:.75;
  }
  .topnav a.active{ background:var(--mauve); color:#fff; opacity:1; box-shadow:0 6px 16px rgba(180,107,136,.28) }

  /* Sections */
  section.snap{
    min-height:100vh; padding:64px 18px; display:flex; align-items:center; justify-content:center;
    scroll-snap-align:start;
  }
  .inner{
    width:min(960px, 92vw);
    background:rgba(255,255,255,.9);
    border-radius:16px; padding:28px;
    box-shadow:var(--shadow);
  }

  /* Names (hero) */
  .couple{
    font-family:"White Angelica", serif;
    font-size:clamp(44px, 9vw, 92px);
    color:#fff; text-align:center; margin:0 0 8px;
    text-shadow:0 2px 10px rgba(0,0,0,.35), 0 0 22px rgba(255,255,255,.3);
  }
  .title{ text-align:center; color:#fff; font-size:clamp(36px,7vw,80px); margin:0 0 12px;
          text-shadow:0 2px 10px rgba(0,0,0,.35) }

  /* Cards */
  h2{ color:var(--mauve); margin:0 0 .5rem 0 }
  .muted{ color:#556 }

  /* Buttons */
  .btn{
    display:inline-block; padding:12px 28px; border:none; border-radius:999px;
    background:var(--mauve); color:#fff; font-weight:600; cursor:pointer; text-decoration:none;
    box-shadow:0 10px 24px rgba(180,107,136,.25); transition:transform .25s var(--ease);
    position:relative; overflow:hidden;
  }
  .btn:hover{ transform:translateY(-2px) }
  .btn::after{
    content:""; position:absolute; inset:0; transform:translateX(-120%) skewX(-20deg);
    background:linear-gradient(90deg, transparent, rgba(255,255,255,.6), transparent);
    transition:transform .65s var(--ease);
  }
  .btn:hover::after{ transform:translateX(200%) skewX(-20deg) }

  /* Countdown */
  #countdown{ display:flex; gap:18px; justify-content:center; flex-wrap:wrap; font-weight:700; margin-top:6px }
  .time-box{ min-width:90px; text-align:center }
  .time-box span{ display:block; font-size:2rem; color:#fff }
  .time-box span.pop{ animation:pop .5s var(--ease) }
  @keyframes pop{ 0%{transform:scale(.9); opacity:.7} 60%{transform:scale(1.08); opacity:1} 100%{transform:scale(1)} }

  /* Music */
  #music-control{
    position:fixed; bottom:20px; right:20px; z-index:30;
    width:54px; height:54px; border-radius:50%; border:none; cursor:pointer;
    background:var(--mauve); color:#fff; font-size:1.2rem; box-shadow:var(--shadow);
  }

  /* Forms / Notes */
  form{ max-width:560px; margin:0 auto; display:flex; flex-direction:column; gap:14px; text-align:left }
  form input, form textarea, form select{
    padding:12px; border:1px solid #ddd; border-radius:10px; font-size:1rem; background:rgba(255,255,255,.95)
  }
  form textarea{ min-height:110px; resize:vertical }
  form button{ background:var(--mauve); color:#fff; border:none; border-radius:10px; padding:12px; font-weight:600; cursor:pointer }
  form button:hover{ background:var(--mauve-2) }
  #responseMsg{ text-align:center; margin-top:10px; font-weight:600 }

  #notesContainer{ margin-top:20px; max-width:620px; margin-inline:auto; text-align:left }
  .note{ padding:12px; border-bottom:1px solid rgba(0,0,0,.1); opacity:0; transform:translateY(8px) }
  .note.show{ opacity:1; transform:none; transition:opacity .5s var(--ease), transform .5s var(--ease) }
  .pagination{ margin-top:12px; display:flex; justify-content:center; gap:10px }
  .pagination button{ padding:8px 14px; border:none; border-radius:8px; background:var(--mauve); color:#fff; cursor:pointer }
  .pagination button:disabled{ background:#cfcfcf; cursor:not-allowed }
</style>
</head>
<body>

<!-- Sticky Nav -->
<nav class="topnav" id="topnav">
  <a href="#home" class="active">Home</a>
  <a href="#details">Details</a>
  <a href="#verse">Verse</a>
  <a href="#rsvp">RSVP</a>
</nav>

<!-- HOME / HERO -->
<section class="snap" id="home" style="display:block">
  <div style="width:100%">
    <h1 class="title">SAVE THE DATE</h1>
    <h2 class="couple">Zen &amp; Yessica</h2>
    <p class="muted" style="text-align:center; max-width:760px; margin:8px auto 16px; color:#eef; text-shadow:0 2px 8px rgba(0,0,0,.35)">
      ‚ÄúMarriage is an act of worship, and every act of worship leads to His love as its ultimate goal.
      It is only fitting that every effort to attain His love is pursued with joy.‚Äù
    </p>

    <div id="countdown" aria-label="Countdown to wedding">
      <div class="time-box"><span id="days">00</span>Days</div>
      <div class="time-box"><span id="hours">00</span>Hours</div>
      <div class="time-box"><span id="minutes">00</span>Minutes</div>
      <div class="time-box"><span id="seconds">00</span>Seconds</div>
    </div>

    <p style="text-align:center; margin-top:16px">
      <a class="btn" 
         href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Zen+%26+Yessica+Wedding&dates=20260117T030000Z/20260117T090000Z&details=Join+us+for+our+wedding+day!&location=Gereja+Santo+Fransiskus+Asisi,+Cibinong"
         target="_blank" rel="noopener">Add to Google Calendar</a>
    </p>
  </div>
</section>

<!-- DETAILS -->
<section class="snap" id="details">
  <div class="inner">
    <h2>Wedding Day</h2>
    <p class="muted">Saturday, 17 January 2026</p>
    <p class="muted">Holy Matrimony: Gereja Santo Fransiskus Asisi, Cibinong</p>
    <p class="muted">Reception: Bagas Raya Cibinong</p>
  </div>
</section>

<!-- VERSE -->
<section class="snap" id="verse">
  <div class="inner">
    <h2>Bible Verse</h2>
    <p class="muted" style="max-width:720px; margin:0 auto">
      ‚ÄúSo they are no longer two, but one flesh. What therefore God has joined together, let no man separate.‚Äù
      <br>‚Äì Matthew 19:6
    </p>
  </div>
</section>

<!-- RSVP & NOTES -->
<section class="snap" id="rsvp">
  <div class="inner">
    <h2>RSVP & Notes</h2>

    <form id="rsvpForm">
      <input type="hidden" name="token" value="ZENYESSICA2026">
      <input type="hidden" id="referer" name="referer">
      <input name="Name" id="nameInput" type="text" placeholder="Your name üíå" required>
      <textarea name="Notes" placeholder="Write your wishes and prayers for us"></textarea>
      <select name="Attendance" id="attendanceInput" required>
        <option value="">-- Attendance --</option>
        <option value="Yes">üíñ Yes, I‚Äôll be there</option>
        <option value="No">üå∏ Sorry, can‚Äôt attend</option>
      </select>
      <button type="submit" class="btn">Send</button>
    </form>
    <p id="responseMsg"></p>

    <h2 style="margin:18px 0 6px">Guest Notes üíå</h2>
    <div id="notesContainer">Loading...</div>
    <div class="pagination">
      <button id="prevBtn" type="button">Prev</button>
      <button id="nextBtn" type="button">Next</button>
    </div>
  </div>
</section>

<!-- Music button -->
<button id="music-control" title="Play/Pause">‚ñ∂Ô∏è</button>

<script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbwRSHvhi28_Fes26DuLR8Ywf0zqY2U7ePzQCdb_4vyUH_Nq0_culqdSfb1U7tajj8zT/exec";
  document.getElementById("referer").value = window.location.hostname;

  // --- Sticky nav active state ---
  const links = [...document.querySelectorAll('.topnav a')];
  const sections = links.map(a => document.querySelector(a.getAttribute('href')));
  const navObserver = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        links.forEach(l=>l.classList.toggle('active', l.getAttribute('href') === '#'+e.target.id));
      }
    });
  }, {rootMargin:'-45% 0px -50% 0px', threshold:0});
  sections.forEach(s=>navObserver.observe(s));

  // --- Countdown with pop ---
  const dEl = document.getElementById("days"),
        hEl = document.getElementById("hours"),
        mEl = document.getElementById("minutes"),
        sEl = document.getElementById("seconds");
  let prev = {};
  function pop(el,val,key){ if(prev[key]!==val){ el.textContent=val; el.classList.remove('pop'); void el.offsetWidth; el.classList.add('pop'); prev[key]=val; } }
  function updateCountdown(){
    const t=new Date("Jan 17, 2026 09:00:00").getTime(), now=Date.now(), diff=t-now;
    if(diff<=0){ document.getElementById("countdown").innerHTML="üéâ Today is the wedding day!"; return; }
    pop(dEl, Math.floor(diff/86400000), "d");
    pop(hEl, Math.floor((diff%86400000)/3600000), "h");
    pop(mEl, Math.floor((diff%3600000)/60000), "m");
    pop(sEl, Math.floor((diff%60000)/1000), "s");
  }
  setInterval(updateCountdown,1000); updateCountdown();

  // --- Music control (autoplay biasanya diblok, jadi manual) ---
  const musicBtn = document.getElementById("music-control");
  const audio = new Audio("music/Music-1.mp3"); audio.loop = true;
  musicBtn.addEventListener('click', ()=>{
    if(audio.paused){ audio.play(); musicBtn.textContent='‚è∏Ô∏è'; }
    else{ audio.pause(); musicBtn.textContent='‚ñ∂Ô∏è'; }
  });
  document.addEventListener("visibilitychange", ()=>{ if(document.hidden){ audio.pause(); musicBtn.textContent='‚ñ∂Ô∏è'; } });

  // --- RSVP submit + notes (time-ago) ---
  function timeAgo(ts){
    const now=new Date(), d=new Date(ts), s=(now-d)/1000;
    if(s<60) return "baru saja";
    const m=Math.floor(s/60); if(m<60) return `${m} menit lalu`;
    const h=Math.floor(m/60); if(h<24) return `${h} jam lalu`;
    const day=Math.floor(h/24); if(day<7) return `${day} hari lalu`;
    const w=Math.floor(day/7); if(w<4) return `${w} minggu lalu`;
    const mo=Math.floor(day/30); return `${mo} bulan lalu`;
  }

  const form = document.getElementById("rsvpForm");
  const msg = document.getElementById("responseMsg");

  form.addEventListener("submit", async (e)=>{
    e.preventDefault();
    if(!form.Name.value.trim() || !form.Attendance.value){
      msg.textContent="‚ö†Ô∏è Please fill out name and attendance üå∏";
      msg.style.color="#c66"; return;
    }
    msg.textContent="‚è≥ Sending..."; msg.style.color="#666";
    try{
      const r = await fetch(scriptURL, { method:"POST", body:new FormData(form) });
      const data = await r.json();
      if(data.status==="success"){ msg.textContent="‚úÖ RSVP berhasil dikirim! Thank you üíï"; msg.style.color="green"; form.reset(); currentPage=1; loadNotes(); }
      else if(data.status==="duplicate"){ msg.textContent="‚ö†Ô∏è You already submitted recently."; msg.style.color="#bb8a4e"; }
      else{ msg.textContent="‚ùå Gagal mengirim RSVP."; msg.style.color="crimson"; }
    }catch(err){ msg.textContent="‚ùå Error: "+err; msg.style.color="crimson"; }
  });

  let notes=[], currentPage=1, perPage=5;
  async function loadNotes(){
    try{
      const res = await fetch(scriptURL);
      notes = await res.json();
      notes.sort((a,b)=> new Date(b.timestamp)-new Date(a.timestamp));
      renderNotes();
    }catch{ document.getElementById("notesContainer").innerHTML="<p>‚ùå Gagal load notes.</p>"; }
  }
  function renderNotes(){
    const box=document.getElementById("notesContainer");
    box.innerHTML=""; if(!notes.length){ box.innerHTML="<p>No notes yet.</p>"; return; }
    const start=(currentPage-1)*perPage; const page=notes.slice(start,start+perPage);
    page.forEach((n,i)=>{
      const el=document.createElement('div'); el.className='note'; el.style.transitionDelay=(i*80)+"ms";
      const icon = n.attendance==="Yes" ? "üíñ" : (n.attendance==="No" ? "üå∏" : "");
      el.innerHTML = `<strong style="color:var(--mauve)">${n.name||"Guest"}</strong> ${icon}<br>
                      <em>${(n.notes||'').toString().replace(/</g,'&lt;')}</em><br>
                      <small class="muted">${timeAgo(n.timestamp)}</small>`;
      box.appendChild(el); requestAnimationFrame(()=> el.classList.add('show'));
    });
    document.getElementById("prevBtn").disabled = start<=0;
    document.getElementById("nextBtn").disabled = start+perPage >= notes.length;
  }
  document.getElementById("prevBtn").addEventListener("click",()=>{ if(currentPage>1){ currentPage--; renderNotes(); }});
  document.getElementById("nextBtn").addEventListener("click",()=>{ if(currentPage*perPage<notes.length){ currentPage++; renderNotes(); }});
  loadNotes();

  // --- Forward guest name into hero subtitle (optional) ---
  const to = new URLSearchParams(location.search).get('to');
  if (to){
    const sub = document.createElement('p');
    sub.className = 'muted';
    sub.style.cssText = 'text-align:center;color:#eef;text-shadow:0 2px 8px rgba(0,0,0,.35);margin-top:6px';
    sub.textContent = `Dear ${to}`;
    document.querySelector('#home > div').insertBefore(sub, document.getElementById('countdown'));
  }
</script>
</body>
</html>
